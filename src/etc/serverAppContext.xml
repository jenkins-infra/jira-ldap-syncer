<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd">

  <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer" />

    <!--  Jira Soap Client -->
    <bean id="jiraSoapClient" class="jiraldapsyncer.JiraSoapClient">
    	<!-- Jira Login credentials -->
    	<constructor-arg index="0" value="${jira.username}" />
    	<constructor-arg index="1" value="${jira.password}" />
    	<property name="defaultGroup" value="jira-users" />
    	<property name="inactiveGroup" value="inactive-staff" />
    </bean>

    <!-- LDAP helpers -->
    <bean id="contextSource" class="org.springframework.ldap.core.support.LdapContextSource">
    	<property name="url" value="${url}" /><!-- something like ldap://localhost:9389 -->
    	<property name="base" value="ou=people,dc=jenkins-ci,dc=org" />
      <property name="userDn" value="cn=admin,dc=jenkins-ci,dc=org" />
      <property name="password" value="${password}" />
    </bean>
    <bean id="ldapTemplate" class="org.springframework.ldap.core.LdapTemplate">
    	<constructor-arg ref="contextSource" />
    </bean>

    <bean id="ldapClient" class="jiraldapsyncer.LdapClient">
    	<property name="ldapTemplate" ref="ldapTemplate" />
    </bean>
    
    <bean id="jiraLdapSyncer" class="jiraldapsyncer.JiraLdapSyncer">
    	<property name="jiraSoapClient" ref="jiraSoapClient" />
    	<property name="ldapClient" ref="ldapClient" />
    </bean>
	
</beans>